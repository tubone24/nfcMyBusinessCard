<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AR Experience - tubone24</title>
	<!-- A-Frameã¨AR.jsã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (æœ€æ–°å®‰å®šç‰ˆ) -->
	<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.js"></script>
	<style>
		body {
			margin: 0;
			overflow: hidden;
			font-family: Arial, sans-serif;
		}

		#ar-info {
			position: fixed;
			top: 10px;
			left: 50%;
			transform: translateX(-50%);
			background: rgba(0, 0, 0, 0.8);
			color: white;
			padding: 15px 30px;
			border-radius: 10px;
			z-index: 1000;
			text-align: center;
			max-width: 90%;
		}

		#ar-info h2 {
			margin: 0 0 10px 0;
			font-size: 1.2em;
		}

		#ar-info p {
			margin: 5px 0;
			font-size: 0.9em;
		}

		#back-button {
			position: fixed;
			bottom: 20px;
			left: 50%;
			transform: translateX(-50%);
			background: linear-gradient(45deg, #24E08E, #6FD740);
			color: white;
			border: none;
			padding: 15px 30px;
			border-radius: 10px;
			font-size: 1em;
			font-weight: bold;
			cursor: pointer;
			z-index: 1000;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
		}

		#back-button:hover {
			background: linear-gradient(45deg, #1fc97b, #5cc535);
		}

		.a-loader-title {
			display: none !important;
		}
	</style>
</head>
<body>
<!--	<div id="ar-info">-->
<!--		<h2 id="status-title">â³ ã‚«ãƒ¡ãƒ©èµ·å‹•æº–å‚™ä¸­...</h2>-->
<!--		<p id="status-message">ã‚«ãƒ¡ãƒ©ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’ãŠé¡˜ã„ã—ã¾ã™</p>-->
<!--		<p style="font-size: 0.8em; color: #4bffde;" id="status-detail"></p>-->
<!--	</div>-->

	<button id="back-button" onclick="window.location.href='/'">æˆ»ã‚‹</button>

	<a-scene
		id="ar-scene"
		embedded
		arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3; sourceWidth: 1280; sourceHeight: 960; displayWidth: 1280; displayHeight: 960;"
		vr-mode-ui="enabled: false"
		renderer="colorManagement: true; physicallyCorrectLights: true; logarithmicDepthBuffer: true; precision: medium;"
	>
		<!-- ã‚«ãƒ¡ãƒ© (è¦–é‡è§’ã‚’åºƒã’ã¦åºƒè§’ã«) -->
		<a-entity camera="fov: 100; near: 0.1; far: 1000"></a-entity>

		<!-- ARãƒãƒ¼ã‚«ãƒ¼: ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼ã‚’ä½¿ç”¨ -->
		<a-marker type="pattern" url="/pattern-marker.patt">
			<!-- ç’°å¢ƒå…‰ (å…¨ä½“ã‚’æ˜ã‚‹ã) - å¼·åŒ– -->
			<a-light type="ambient" color="#ffffff" intensity="2.5"></a-light>

			<!-- åŠçƒãƒ©ã‚¤ãƒˆ (ç©ºã¨åœ°é¢ã‹ã‚‰ã®ç…§ã‚Šè¿”ã—) -->
			<a-light type="hemisphere" color="#ffffff" groundColor="#888888" intensity="1.5"></a-light>

			<!-- æŒ‡å‘æ€§ãƒ©ã‚¤ãƒˆ (è¤‡æ•°æ–¹å‘ã‹ã‚‰) -->
			<a-light type="directional" color="#ffffff" intensity="1.2" position="1 1 1"></a-light>
			<a-light type="directional" color="#ffffff" intensity="0.8" position="-1 0.5 -1"></a-light>

			<!-- ãƒã‚¤ãƒ³ãƒˆãƒ©ã‚¤ãƒˆ (ãƒãƒ¼ã‚«ãƒ¼ã®ä¸Šã‹ã‚‰) -->
			<a-light type="point" color="#ffffff" intensity="1.5" position="0 2 0"></a-light>

			<!-- ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ« (ä¸­å¤®) -->
			<a-entity
				position="0 0 0"
				rotation="-40 0 0"
				scale="0.09 0.09 0.09"
				gltf-model="/model.glb"
			></a-entity>

			<!-- æŸ´çŠ¬ãƒ¢ãƒ‡ãƒ« (æ‰‹å‰ã§å·¦å³ã«èµ°ã‚‹) -->
			<a-entity
				position="-2 -0.8 0.5"
				rotation="-40 90 0"
				scale="0.6 0.6 0.6"
				gltf-model="/shiba-model.glb"
				animation__move="property: position; from: -1.8 -0.8 0.5; to: 1.8 -0.8 0.5; dur: 5000; easing: easeInOutQuad; loop: true; dir: alternate"
				animation__turn="property: rotation; from: -40 90 0; to: -40 -90 0; dur: 5000; loop: true; dir: alternate"
			></a-entity>

			<!-- MacBookãƒ¢ãƒ‡ãƒ« (æŸ´çŠ¬ã¨åŒã˜é«˜ã•ã§å·¦å³ã«ã‚¹ãƒ©ã‚¤ãƒ‰) -->
			<a-entity
				position="1.8 -0.8 0.5"
				rotation="-40 -90 0"
				scale="0.5 0.5 0.5"
				gltf-model="/macbook-laptop.glb"
				animation__move="property: position; from: 1.8 -0.8 0.5; to: -1.8 -0.8 0.5; dur: 7000; easing: easeInOutQuad; loop: true; dir: alternate"
				animation__turn="property: rotation; from: -40 -90 0; to: -40 90 0; dur: 7000; loop: true; dir: alternate"
			></a-entity>

			<!-- ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º (ä¸Šã«é…ç½®) - æµ®éŠ&æ‹¡å¤§ç¸®å°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ -->
			<!-- å½±ãƒ¬ã‚¤ãƒ¤ãƒ¼5 (ä¸€ç•ªå¥¥) -->
			<a-text
				value="tubone24"
				position="0.1 1.4 -0.1"
				rotation="0 0 0"
				align="center"
				color="#000000"
				opacity="0.4"
				width="6"
				font="/Condiment-Regular-msdf.json"
				shader="msdf"
				negate="false"
				animation__float="property: position; from: 0.1 1.2 -0.1; to: 0.1 1.6 -0.1; dur: 3000; easing: easeInOutQuad; loop: true; dir: alternate"
				animation__scale="property: scale; from: 0.9 0.9 0.9; to: 1.1 1.1 1.1; dur: 2000; easing: easeInOutQuad; loop: true; dir: alternate"
			></a-text>
			<!-- å½±ãƒ¬ã‚¤ãƒ¤ãƒ¼4 -->
			<a-text
				value="tubone24"
				position="0.08 1.42 -0.08"
				rotation="0 0 0"
				align="center"
				color="#0a0a0a"
				opacity="0.5"
				width="6"
				font="/Condiment-Regular-msdf.json"
				shader="msdf"
				negate="false"
				animation__float="property: position; from: 0.08 1.22 -0.08; to: 0.08 1.62 -0.08; dur: 3000; easing: easeInOutQuad; loop: true; dir: alternate"
				animation__scale="property: scale; from: 0.9 0.9 0.9; to: 1.1 1.1 1.1; dur: 2000; easing: easeInOutQuad; loop: true; dir: alternate"
			></a-text>
			<!-- å½±ãƒ¬ã‚¤ãƒ¤ãƒ¼3 -->
			<a-text
				value="tubone24"
				position="0.06 1.44 -0.06"
				rotation="0 0 0"
				align="center"
				color="#1a1a1a"
				opacity="0.6"
				width="6"
				font="/Condiment-Regular-msdf.json"
				shader="msdf"
				negate="false"
				animation__float="property: position; from: 0.06 1.24 -0.06; to: 0.06 1.64 -0.06; dur: 3000; easing: easeInOutQuad; loop: true; dir: alternate"
				animation__scale="property: scale; from: 0.9 0.9 0.9; to: 1.1 1.1 1.1; dur: 2000; easing: easeInOutQuad; loop: true; dir: alternate"
			></a-text>
			<!-- ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³2 (æš—ã„ç·‘) -->
			<a-text
				value="tubone24"
				position="0.04 1.46 -0.04"
				rotation="0 0 0"
				align="center"
				color="#145040"
				opacity="0.8"
				width="6"
				font="/Condiment-Regular-msdf.json"
				shader="msdf"
				negate="false"
				animation__float="property: position; from: 0.04 1.26 -0.04; to: 0.04 1.66 -0.04; dur: 3000; easing: easeInOutQuad; loop: true; dir: alternate"
				animation__scale="property: scale; from: 0.9 0.9 0.9; to: 1.1 1.1 1.1; dur: 2000; easing: easeInOutQuad; loop: true; dir: alternate"
			></a-text>
			<!-- ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³1 (ã‚„ã‚„æš—ã„ç·‘) -->
			<a-text
				value="tubone24"
				position="0.02 1.48 -0.02"
				rotation="0 0 0"
				align="center"
				color="#1a7050"
				width="6"
				font="/Condiment-Regular-msdf.json"
				shader="msdf"
				negate="false"
				animation__float="property: position; from: 0.02 1.28 -0.02; to: 0.02 1.68 -0.02; dur: 3000; easing: easeInOutQuad; loop: true; dir: alternate"
				animation__scale="property: scale; from: 0.9 0.9 0.9; to: 1.1 1.1 1.1; dur: 2000; easing: easeInOutQuad; loop: true; dir: alternate"
			></a-text>
			<!-- ãƒ¡ã‚¤ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ (æ˜ã‚‹ã„ç·‘) -->
			<a-text
				value="tubone24"
				position="0 1.5 0"
				rotation="0 0 0"
				align="center"
				color="#24E08E"
				width="6"
				font="/Condiment-Regular-msdf.json"
				shader="msdf"
				negate="false"
				animation__float="property: position; from: 0 1.3 0; to: 0 1.7 0; dur: 3000; easing: easeInOutQuad; loop: true; dir: alternate"
				animation__scale="property: scale; from: 0.9 0.9 0.9; to: 1.1 1.1 1.1; dur: 2000; easing: easeInOutQuad; loop: true; dir: alternate"
			></a-text>
		</a-marker>
	</a-scene>

	<script>
		// UIè¦ç´ ã‚’å–å¾—
		const statusTitle = document.getElementById('status-title');
		const statusMessage = document.getElementById('status-message');
		const statusDetail = document.getElementById('status-detail');

		// ã‚«ãƒ¡ãƒ©ã®èµ·å‹•çŠ¶æ…‹ã‚’ç›£è¦–
		let cameraStarted = false;

		// A-Frameã‚·ãƒ¼ãƒ³ã®æº–å‚™ã‚’å¾…ã¤
		window.addEventListener('load', function() {
			const scene = document.querySelector('a-scene');

			// ãƒ¢ãƒ‡ãƒ«ã®èª­ã¿è¾¼ã¿çŠ¶æ³ã‚’ç›£è¦–
			document.querySelectorAll('[gltf-model]').forEach((entity, index) => {
				const modelPath = entity.getAttribute('gltf-model');
				console.log(`ãƒ¢ãƒ‡ãƒ«${index + 1}: ${modelPath} ã‚’èª­ã¿è¾¼ã¿ä¸­...`);

				entity.addEventListener('model-loaded', () => {
					console.log(`âœ… ãƒ¢ãƒ‡ãƒ«${index + 1}: ${modelPath} èª­ã¿è¾¼ã¿å®Œäº†!`);
				});

				entity.addEventListener('model-error', (error) => {
					console.error(`âŒ ãƒ¢ãƒ‡ãƒ«${index + 1}: ${modelPath} èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:`, error);
				});
			});

			if (scene) {
				// A-Frameã‚·ãƒ¼ãƒ³ã®èª­ã¿è¾¼ã¿å®Œäº†ã‚’å¾…ã¤
				scene.addEventListener('loaded', () => {
					console.log('A-Frameã‚·ãƒ¼ãƒ³èª­ã¿è¾¼ã¿å®Œäº†');
					// if (statusDetail) {
					// 	statusDetail.textContent = 'ã‚·ãƒ¼ãƒ³èª­ã¿è¾¼ã¿å®Œäº†...ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•ä¸­';
					// }
				});

				// AR.jsã®åˆæœŸåŒ–å®Œäº†ã‚’æ¤œå‡º
				scene.addEventListener('arjs-video-loaded', () => {
					console.log('ã‚«ãƒ¡ãƒ©æ˜ åƒãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ!');
					cameraStarted = true;
					// if (statusTitle) statusTitle.textContent = 'ğŸ“¹ ã‚«ãƒ¡ãƒ©èµ·å‹•æˆåŠŸ!';
					// if (statusMessage) statusMessage.textContent = 'ARãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚«ãƒ¡ãƒ©ã«å‘ã‘ã¦ãã ã•ã„';
					// if (statusDetail) statusDetail.textContent = 'ãƒãƒ¼ã‚«ãƒ¼ãŒèªè­˜ã•ã‚Œã‚‹ã¨3Dã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™';
				});

				// ãƒãƒ¼ã‚«ãƒ¼ãŒè¦‹ã¤ã‹ã£ãŸæ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆ
				const marker = document.querySelector('a-marker');
				if (marker) {
					marker.addEventListener('markerFound', () => {
						console.log('ãƒãƒ¼ã‚«ãƒ¼ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ!');
						// if (statusTitle) statusTitle.textContent = 'âœ… ãƒãƒ¼ã‚«ãƒ¼æ¤œå‡ºæˆåŠŸ!';
						// if (statusMessage) statusMessage.textContent = '3Dã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™';
						// if (statusDetail) statusDetail.textContent = '';
					});

					marker.addEventListener('markerLost', () => {
						console.log('ãƒãƒ¼ã‚«ãƒ¼ã‚’è¦‹å¤±ã„ã¾ã—ãŸ');
						// if (statusTitle) statusTitle.textContent = 'ğŸ¯ ARã‚«ãƒ¡ãƒ©èµ·å‹•ä¸­';
						// if (statusMessage) statusMessage.textContent = 'ARãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚«ãƒ¡ãƒ©ã«å‘ã‘ã¦ãã ã•ã„';
						// if (statusDetail) statusDetail.textContent = '';
					});
				}
			}

			// 10ç§’çµŒã£ã¦ã‚‚ã‚«ãƒ¡ãƒ©ãŒèµ·å‹•ã—ãªã„å ´åˆã¯è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º
			setTimeout(() => {
				if (!cameraStarted) {
					console.warn('ã‚«ãƒ¡ãƒ©ã®èµ·å‹•ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™');
					// if (statusTitle) statusTitle.textContent = 'âš ï¸ ã‚«ãƒ¡ãƒ©èµ·å‹•ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™';
					// if (statusMessage) statusMessage.textContent = 'ã‚¨ãƒ©ãƒ¼ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™';
					// if (statusDetail) {
					// 	statusDetail.innerHTML = '<strong>å¯¾å‡¦æ–¹æ³•:</strong><br>1. ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰<br>2. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚«ãƒ¡ãƒ©è¨±å¯ã‚’ç¢ºèª<br>3. ä»–ã®ã‚¢ãƒ—ãƒªãŒã‚«ãƒ¡ãƒ©ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ã‹ç¢ºèª';
					// }
				}
			}, 10000);
		});
	</script>
</body>
</html>
